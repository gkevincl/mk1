<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Golpe y Fuera — MK1 | Jetro Invitational</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="description" content="Torneo relámpago Golpe y Fuera — Mortal Kombat 1. Transmisión, resultados y brackets." />
</head>
<body>
  <div class="page" id="page-root">
    <header class="masthead">
        <div class="masthead-right">
        <h1 class="title flicker">GOLPE Y FUERA</h1>
        <h2 class="subtitle">TORNEO RELÁMPAGO — MORTAL KOMBAT 1</h2>
        <p class="meta">Sábado 13 — 3:00 PM · Casa de Gerald</p>
      </div>
    </header>

    <main class="container">
      <!-- IZQUIERDA: stream + countdown -->
      <section class="col-left">
        <div class="card stream-card">
          <div class="card-head">
            <h3>Twitch — Transmisión en vivo</h3>
            <div class="stream-actions">
              <button id="open-twitch" class="btn small">Abrir en Twitch</button>
              <button id="tv-mode" class="btn small">Modo TV</button>
            </div>
          </div>

          <div id="twitch-embed" class="embed">
            <!-- IMPORTANTE: cambia channel= y parent= a tus valores reales cuando publiques -->
            <iframe
              id="twitch-iframe"
              src="https://player.twitch.tv/?channel=j3tr0_6&parent=gkevincl.github.io&muted=false"
              allowfullscreen
              frameborder="0"
              scrolling="no"
              title="Twitch Stream"
            ></iframe>
          </div>

          <div class="countdown" aria-live="polite">
            <div class="countdown-label">Cuenta regresiva</div>
            <div id="countdown-timer" class="countdown-timer">--:--:--</div>
            <div id="countdown-caption" class="countdown-caption">Faltan para el Golpe y Fuera — Jetro Invitational</div>
          </div>
        </div>
      </section>

      <!-- DERECHA: info del torneo -->
      <aside class="col-right">
        <div class="card info-card">
              <h3>Información del torneo</h3>
              <ul class="info-list">
                <li>
                  <strong>Formato:</strong> Torneo en dos fases
                  <ul>
                    <li>
                      <strong>Fase 1 – Round Robin (todos contra todos):</strong>
                      <ul>
                        <li>Cada jugador se enfrenta una vez contra cada rival</li>
                        <li>Encuentros al mejor de 3 peleas</li>
                        <li>
                          <strong>Seeding:</strong> Clasificación por puntos.
                        </li>
                      </ul>
                    </li>
              
                    <li>
                      <strong>Fase 2 – Llaves (Doble Eliminación):</strong>
                      <ul>
                        <li>Todos los jugadores clasifican a esta fase</li>
                        <li>Los mejores seeds obtienen ventaja inicial (llaves favorables)</li>
                        <li>Un jugador queda eliminado tras acumular 2 derrotas</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              
                <li>
                  <strong>Regla de veto de personaje:</strong>
                  Si un jugador gana un encuentro usando un personaje, ese personaje queda vetado únicamente para su siguiente combate.
                </li>
              
                <li>
                  <strong>Regla de juego limpio:</strong>
                  La mejor forma de respetar al rival es dándolo todo en combate. Todos los estilos de batalla son válidos.
                </li>
              
                <li>
                  <strong>Inscripción:</strong> Lista cerrada – Solo con invitación
                </li>
                 <li>
                  <strong>Premiación:</strong> El ganador se lleva todo
                </li>
              </ul>

          <h4>Participantes</h4>
          <div class="players">
            <span>Gerald</span><span>Jetro</span><span>Santy</span><span>Darwin</span>
            <span>Fernando</span><span>Luis</span><span>Santiago</span>
          </div>
        </div>
      </aside>
    </main>

    <!-- EMBEDS FULL WIDTH (abajo) -->
    <section class="embeds-full">
      <div class="embed-row">
        <div class="card embed-card wide">
          <h3>Tabla de puntuaciones</h3>
          <div class="embed embed-large">
            <iframe src="https://challonge.com/es/lc0jxwcc/module" width="100%" height="500" frameborder="0" scrolling="auto" allowtransparency="true"></iframe>
          </div>
        </div>
      </div>
    </section>

    <footer class="site-footer">
      <div>Host & Organización: <strong>Jetro Producciones</strong></div>
    </footer>
  </div>

  <!-- SCRIPTS -->
  <script>
  (function () {
    // --- Configuración rápida
    // Cambia a la fecha/hora del torneo (formato ISO)
    const tournamentDateStr = '2025-12-13T15:00:00';
    const targetDate = new Date(tournamentDateStr);

    // Countdown
    const cdTimer = document.getElementById('countdown-timer');
    const cdCaption = document.getElementById('countdown-caption');

    function updateCountdown() {
      const now = new Date();
      const diff = targetDate - now;

      if (isNaN(targetDate.getTime())) {
        cdTimer.textContent = '--:--:--';
        cdCaption.textContent = 'Fecha no configurada correctamente';
        return;
      }

      if (diff <= 0) {
        cdTimer.textContent = 'EN VIVO / FINALIZADO';
        cdCaption.textContent = 'El torneo ha empezado o ya terminó.';
        clearInterval(cdInterval);
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000*60*60)) % 24);
      const minutes = Math.floor((diff / (1000*60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      const parts = [];
      if (days) parts.push(days + 'd');
      parts.push(String(hours).padStart(2,'0') + 'h');
      parts.push(String(minutes).padStart(2,'0') + 'm');
      parts.push(String(seconds).padStart(2,'0') + 's');

      cdTimer.textContent = parts.join(' ');
    }

    updateCountdown();
    const cdInterval = setInterval(updateCountdown, 1000);

    // Open Twitch
    document.getElementById('open-twitch').addEventListener('click', function () {
      window.open('https://www.twitch.tv/j3tr0_6', '_blank');
    });

    // Modo TV (fullscreen del documento)
    const tvBtn = document.getElementById('tv-mode');
    tvBtn.addEventListener('click', function () {
      const el = document.documentElement;
      if (!document.fullscreenElement) {
        el.requestFullscreen?.().catch(()=>{ /* algunos navegadores necesitan gesto del usuario */ });
      } else {
        document.exitFullscreen?.();
      }
    });

    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape' && document.fullscreenElement) {
        document.exitFullscreen?.();
      }
    });

    // Optional: if you host elsewhere, update the twitch iframe parent param programmatically:
    // const twitchIframe = document.getElementById('twitch-iframe');
    // twitchIframe.src = `https://player.twitch.tv/?channel=TU_CANAL&parent=TU_DOMINIO&muted=false`;

  })();
  </script>
</body>
</html>
