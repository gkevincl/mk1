<script>
(function () {
  // COUNTDOWN — Fecha corregida
  const tournamentDateStr = '2025-12-13T15:00:00';
  const targetDate = new Date(tournamentDateStr);

  const cdTimer = document.getElementById('countdown-timer');
  const cdCaption = document.getElementById('countdown-caption');

  function updateCountdown() {
    const now = new Date();
    const diff = targetDate - now;
    if (diff <= 0) {
      cdTimer.textContent = 'EN VIVO / FINALIZADO';
      cdCaption.textContent = 'El torneo ha empezado o ya terminó.';
      clearInterval(cdInterval);
      return;
    }
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((diff / (1000 * 60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);
    const parts = [];
    if (days) parts.push(days + 'd');
    parts.push(String(hours).padStart(2, '0') + 'h');
    parts.push(String(minutes).padStart(2, '0') + 'm');
    parts.push(String(seconds).padStart(2, '0') + 's');
    cdTimer.textContent = parts.join(' ');
  }
  updateCountdown();
  const cdInterval = setInterval(updateCountdown, 1000);

  // TWITCH – corregido con parent
  const twitchEmbed = document.querySelector('#twitch-embed iframe');
  twitchEmbed.src = "https://player.twitch.tv/?channel=j3tr0_6&parent=gkevincl.github.io&muted=false";

  // Open Twitch
  document.getElementById('open-twitch').addEventListener('click', function () {
    window.open('https://www.twitch.tv/j3tr0_6', '_blank');
  });

  // FULLSCREEN – Modo TV mejorado
  const tvBtn = document.getElementById('tv-mode');
  tvBtn.addEventListener('click', function () {
    const el = document.documentElement; // <— FULLSCREEN REAL
    if (!document.fullscreenElement) {
      el.requestFullscreen?.();
    } else {
      document.exitFullscreen?.();
    }
  });

})();
</script>
